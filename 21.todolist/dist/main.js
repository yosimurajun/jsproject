(()=>{let t=[{type:"inbox",data:"5 mon 27 days",date:"2021-05-27"},{type:"inbox",data:"5 mon 28 days",date:"2021-05-27"},{type:"inbox",data:"6 mon 2 days",date:"2021-06-02"},{type:"inbox",data:"6 mon 1 days",date:"2021-06-01"}];const e=document.querySelector("#container"),n=document.querySelector("#content"),a=document.querySelector(".side_header_ul"),d=document.querySelector(".main_header_title"),o=(document.querySelector(".main_container"),document.querySelector(".s_form")),c=document.querySelector(".main_ul");function s(a){const d=document.createElement("form"),c=document.createElement("input"),i=document.createElement("input"),l=document.createElement("button");c.setAttribute("type","text"),c.setAttribute("id","contents"),i.setAttribute("type","date"),i.setAttribute("id","date"),l.setAttribute("type","submit"),l.textContent="add",d.classList.add(a),d.classList.add("create"),d.classList.add("_form"),d.appendChild(c),d.appendChild(i),d.appendChild(l),o.innerHTML="",o.appendChild(d),function(a,d){a.addEventListener("submit",(a=>{a.preventDefault(),console.log("submit");const o=document.querySelector("#contents"),c=document.querySelector("#date");if(""==o.value){const t=document.createElement("div");t.classList.add("alert");const a=document.createElement("p"),d=document.createElement("p");a.textContent="please input content",d.textContent="ex) homework";const o=document.createElement("button");return o.textContent="close",o.classList.add("error_button"),d.classList.add("error_desc"),t.appendChild(a),t.appendChild(d),t.appendChild(o),n.appendChild(t),e.classList.add("stop"),void o.addEventListener("click",(n=>{n.target.parentElement.parentElement.removeChild(t),e.classList.remove("stop")}))}if(""==c.value){const t=document.createElement("div");t.classList.add("alert");const a=document.createElement("p"),d=document.createElement("p");a.textContent="please input date",d.textContent="ex) mm / dd / yyyy >> 04 / 04 / 2024",d.classList.add("error_desc");const o=document.createElement("button");return o.textContent="close",o.classList.add("error_button"),t.appendChild(a),t.appendChild(d),t.appendChild(o),n.appendChild(t),e.classList.add("stop"),void o.addEventListener("click",(n=>{n.target.parentElement.parentElement.removeChild(t),e.classList.remove("stop")}))}{let e;e=((t,e,n)=>({type:t,data:e,date:n}))("today"==d||"next"==d?"inbox":d,o.value,c.value),t.push(e),s(d),r(d)}}))}(d,a)}const i=document.querySelector(".items");function l(){const t=document.querySelectorAll(".side_link");c.classList.remove("active"),t.forEach((t=>t.classList.remove("active")))}function r(e){let n;i.innerHTML="","inbox"==e&&(n=t.sort(((t,e)=>t.date>e.date)).filter((t=>t.type===e))),"today"==e&&(n=t.sort(((t,e)=>t.date>e.date)).filter((t=>t.date===u()))),"next"==e&&(n=t.sort(((t,e)=>t.date>e.date)).filter((t=>new Date(u()).getTime()<new Date(t.date).getTime()&&new Date(t.date).getTime()<=new Date(u(7)).getTime()))),"inbox"!==e&&"today"!==e&&"next"!==e&&(n=t.sort(((t,e)=>t.date>e.date)).filter((t=>t.type===e))),n.forEach(((n,a)=>{const d=document.createElement("div"),c=document.createElement("p"),l=document.createElement("span"),u=document.createElement("div"),m=document.createElement("span"),p=document.createElement("span");d.classList.add("item"),c.textContent=n.data,m.textContent="delete",m.classList.add("delete"),p.textContent="update",p.classList.add("update"),l.classList.add("date"),l.textContent=n.date,u.classList.add("option"),u.appendChild(l),u.appendChild(p),u.appendChild(m),d.appendChild(c),d.appendChild(u),p.addEventListener("click",(a=>function(e,n){const a=document.createElement("form"),d=document.createElement("input"),c=document.createElement("input"),i=document.createElement("button");d.setAttribute("type","text"),d.setAttribute("id","contents"),c.setAttribute("type","date"),c.setAttribute("id","date"),i.setAttribute("type","submit"),i.textContent="update",a.classList.add("update"),a.classList.add("_form"),d.value=n.data,c.value=n.date,a.appendChild(d),a.appendChild(c),a.appendChild(i),o.innerHTML="",o.appendChild(a);let l=t.indexOf(n);a.addEventListener("submit",(n=>{n.preventDefault();const a=document.querySelector("#contents"),d=document.querySelector("#date");!function(e,n){t[n].data=e.data,t[n].date=e.date}({type:"inbox",data:a.value,date:d.value},l),s(e),r(e)}))}(e,n))),m.addEventListener("click",(a=>function(e,n){console.log("deleteItem :: "),console.log(e,n,date),i.innerHTML="","inbox"===e&&(t=t.filter((t=>t.data!==n)),r(e)),"today"===e&&(t=t.filter((t=>t.data!==n)),r(e)),"next"===e&&(t=t=t.filter((t=>t.data!==n)),r(e))}(e,n.data))),i.appendChild(d)}))}function u(t){const e=new Date;let n=new Date(e.getFullYear(),e.getMonth(),e.getDate()),a=e.getFullYear(),d=e.getMonth()+1,o="";t?n=new Date(n.getFullYear(),n.getMonth()+1,n.getDate()+7):o=e.getDate();let c=n.getFullYear(),s=n.getMonth(),i=n.getDate();return s<10&&(s="0"+s),i<10&&(i="0"+i),d<10&&(d="0"+d),o<10&&(o="0"+o),t?`${c}-${s}-${i}`:`${a}-${d}-${o}`}a.addEventListener("click",(t=>{const e=t.target.dataset.type;"inbox"==e&&(l(),d.textContent=e,t.target.classList.add("active"),s(e),r(e)),"today"==e&&(l(),d.textContent=e,t.target.classList.add("active"),s(e),r(e)),"next"===e&&(l(),d.textContent=e,t.target.classList.add("active"),s(e),r(e)),"project"==e&&(l(),d.textContent=e,t.target.classList.add("active"),s(e),r(e))})),c.addEventListener("click",(t=>{const e=t.target.dataset.type;"work"===e&&(l(),d.textContent=e,t.target.classList.add("active"),s(e),r(e)),"personal"===e&&(l(),d.textContent=e,t.target.classList.add("active"),s(e),r(e))}))})();